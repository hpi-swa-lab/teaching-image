name: tests

# Triggers the workflow on push or pull request on any branch
on: [push, pull_request]

jobs:
  # This workflow contains a single job called "build"
  build:
    runs-on: macos-latest
    strategy:
      matrix:
        # Create one build with StarTrack and one without (StarTrack is used to collect data for a chair's user study)
        star_track: [true, false]
    name: Build with StarTrack ${{ matrix.star_track }}
    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - uses: actions/checkout@v2
      - uses: actions/setup-python@v2
        with:
          python-version: '3.x'
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -U pyobjc
      - run: bash MAKE.command
        timeout-minutes: 20
        env: 
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          STARTRACK: ${{ matrix.star_track }}
          RELEASE: 5.3
          PATCH: 19459
          LECTURE: SWA
          YEAR: 2022
